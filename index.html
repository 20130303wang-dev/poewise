<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PoeWise - æ™ºæ…§ç»ˆç«¯</title>
    <style>
        :root { 
            --wise-green: #25d970; 
            --bg: #ffffff; 
            --text-main: #111827; 
            --text-sub: #6b7280; 
            --border: #f0f0f0;
        }
        
        body { font-family: -apple-system, "PingFang SC", sans-serif; background: var(--bg); margin: 0; color: var(--text-main); -webkit-font-smoothing: antialiased; }
        
        /* é¡¶éƒ¨å¯¼èˆªåˆ‡æ¢ */
        .tab-nav { display: flex; background: #fff; border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; }
        .tab-btn { flex: 1; text-align: center; padding: 18px 0; font-size: 15px; font-weight: 700; color: var(--text-sub); cursor: pointer; border: none; background: none; transition: 0.3s; }
        .tab-btn.active { color: var(--wise-green); border-bottom: 3px solid var(--wise-green); }

        .header { padding: 40px 20px 10px; text-align: left; max-width: 480px; margin: 0 auto; }
        .header h1 { margin: 0; font-size: 32px; font-weight: 800; letter-spacing: -1px; }
        .header h1 span { color: var(--wise-green); }
        .header p { color: var(--text-sub); margin-top: 8px; font-size: 15px; }

        .container { max-width: 480px; margin: 0 auto; padding: 0 20px; }

        .content-section { display: none; }
        .content-section.active { display: block; animation: slideUp 0.4s ease-out; }

        /* æœç´¢æ¡†ï¼šWise é£æ ¼ */
        .search-wrap { margin: 25px 0; }
        .search-input { width: 100%; padding: 16px; background: #f9fafb; border: 1px solid var(--border); border-radius: 14px; font-size: 17px; outline: none; box-sizing: border-box; }
        .search-input:focus { border-color: var(--wise-green); background: #fff; box-shadow: 0 0 0 4px rgba(37, 217, 112, 0.1); }

        /* æŠ€èƒ½å¡ç‰‡ */
        .gem-card { background: #fff; border: 1px solid var(--border); border-radius: 20px; padding: 24px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); }
        .badge { font-size: 11px; font-weight: 700; color: var(--wise-green); background: rgba(37, 217, 112, 0.08); padding: 5px 12px; border-radius: 8px; margin-bottom: 15px; display: inline-block; }
        .en-title { font-size: 24px; font-weight: 800; color: var(--text-main); margin: 0; }
        .zh-title { font-size: 17px; color: var(--text-sub); margin: 4px 0 15px; font-weight: 500; }

        /* å¤§é›·è¾¾å›¾åŒºåŸŸ */
        .radar-section { background: #f9fafb; border-radius: 16px; padding: 30px 0; margin: 20px 0; display: flex; flex-direction: column; align-items: center; }
        .radar-canvas { width: 280px; height: 280px; }

        /* è”åŠ¨å»ºè®® */
        .synergy-box { background: #f0fff4; border-radius: 14px; padding: 18px; border: 1px solid rgba(37, 217, 112, 0.2); }
        .syn-label { font-size: 12px; color: var(--wise-green); font-weight: 800; margin-bottom: 6px; display: block; }

        /* å…è´£å£°æ˜ï¼šå¯¹é½ indexa.html */
        .disclaimer-wrap { margin-top: 50px; padding: 25px 20px; border-top: 1px solid var(--border); background: #fcfcfc; }
        .disclaimer-text { font-size: 13px; color: var(--text-sub); line-height: 1.8; }

        .footer { text-align: center; padding: 40px 20px; font-size: 13px; color: var(--text-sub); border-top: 1px solid var(--border); }

        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<nav class="tab-nav">
    <button class="tab-btn active" onclick="switchTab('rate', this)">ğŸ’° æ±‡ç‡è®¡ç®—</button>
    <button class="tab-btn" onclick="switchTab('gem', this)">âš”ï¸ æŠ€èƒ½è¿æ‹›</button>
</nav>

<div id="tab-rate" class="tab-content content-section active">
    <div class="header"><h1>PoeWise <span>Rate</span></h1><p>å®æ—¶æ±‡ç‡æ¢ç®—ç»ˆç«¯</p></div>
    <div class="container">
        <div style="background:#f9fafb; padding:25px; border-radius:18px; border:1px solid var(--border); margin-top:20px;">
            <p style="text-align:center; color:var(--text-sub);">[ æ±‡ç‡æ¨¡å—å·²è¿æ¥ ]</p>
        </div>
    </div>
</div>

<div id="tab-gem" class="tab-content content-section">
    <div class="header"><h1>PoE2 <span>Catalyst</span></h1><p>å…¨é‡å®çŸ³è”åŠ¨ Â· æ€§èƒ½åˆ†æ</p></div>
    <div class="container">
        <div class="search-wrap">
            <input type="text" id="gemSearch" class="search-input" placeholder="è¾“å…¥åç§° (å¦‚: ç¢éª¨ / Boneshatter)" oninput="handleSearch()">
        </div>
        <div id="gem-results"></div>
    </div>
</div>

<div class="disclaimer-wrap">
    <div class="container">
        <div class="disclaimer-text">
            <strong>å…è´£å£°æ˜ï¼š</strong><br>
            æœ¬å¹³å°æ•°æ®ä»…ä¾›å‚è€ƒã€‚æ±‡ç‡æ•°æ®æºè‡ªå®æ—¶ APIï¼Œå—ç½‘ç»œæ³¢åŠ¨å½±å“å¯èƒ½å­˜åœ¨å¾®é‡å»¶è¿Ÿï¼›æŠ€èƒ½è”åŠ¨é€»è¾‘åŸºäºç¤¾åŒºå…¬å¼€èµ„æ–™åˆ†æï¼Œä¸ä½œä¸ºæ¸¸æˆå†…å”¯ä¸€æ ‡å‡†ã€‚
        </div>
    </div>
</div>

<div class="footer">&copy; 2026 PoeWise Terminal. All rights reserved.</div>

<script>
    // åˆ‡æ¢æ ‡ç­¾
    function switchTab(type, btn) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('tab-' + type).classList.add('active');
        if(type === 'gem') initGemData();
    }

    let gemData = [];
    async function initGemData() {
        if(gemData.length > 0) return;
        try {
            const res = await fetch('catalyst_master_db.json');
            gemData = await res.json();
        } catch(e) { console.error("æ•°æ®åŠ è½½å¤±è´¥"); }
    }

    function handleSearch() {
        const query = document.getElementById('gemSearch').value.toLowerCase();
        const results = document.getElementById('gem-results');
        results.innerHTML = '';
        if(!query) return;

        const matches = gemData.filter(g => g.en.toLowerCase().includes(query) || g.zh.includes(query));
        matches.forEach((gem, idx) => {
            const canvasId = `radar-${idx}`;
            results.innerHTML += `
                <div class="gem-card">
                    <span class="badge">${gem.role}</span>
                    <p class="en-title">${gem.en}</p>
                    <p class="zh-title">${gem.zh}</p>
                    <p style="font-size:14px; color:var(--text-sub); border-top:1px solid var(--border); padding-top:15px; line-height:1.6;">${gem.desc}</p>
                    <div class="radar-section">
                        <canvas id="${canvasId}" width="360" height="360" style="width:280px;height:280px;"></canvas>
                    </div>
                    <div class="synergy-box"><span class="syn-label">âš¡ æœ€ä½³è”åŠ¨</span><div style="font-weight:700;">${gem.syn}</div></div>
                </div>`;
            setTimeout(() => drawRadar(canvasId, gem.stats), 50);
        });
    }

    function drawRadar(id, stats) {
        const canvas = document.getElementById(id);
        const ctx = canvas.getContext('2d'), cx = 180, cy = 180, r = 110;
        const lbls = ["ä¼¤å®³", "èŒƒå›´", "æœºåŠ¨", "ç‰¹æ•ˆ", "æ‰‹æ„Ÿ"];
        ctx.clearRect(0,0,360,360); ctx.strokeStyle = '#e5e7eb';
        for(let j=1; j<=3; j++){
            ctx.beginPath(); let cr=(r/3)*j;
            for(let i=0; i<5; i++){ let a=(Math.PI*2/5)*i-Math.PI/2; ctx.lineTo(cx+cr*Math.cos(a),cy+cr*Math.sin(a)); }
            ctx.closePath(); ctx.stroke();
        }
        ctx.font="bold 14px sans-serif"; ctx.fillStyle="#6b7280"; ctx.textAlign="center";
        lbls.forEach((l,i)=>{ let a=(Math.PI*2/5)*i-Math.PI/2; ctx.fillText(l,cx+(r+40)*Math.cos(a),cy+(r+20)*Math.sin(a)); });
        ctx.fillStyle='rgba(37,217,112,0.25)'; ctx.strokeStyle='#25d970'; ctx.lineWidth=4;
        ctx.beginPath();
        stats.forEach((s,i)=>{ let a=(Math.PI*2/5)*i-Math.PI/2; ctx.lineTo(cx+(s/100)*r*Math.cos(a),cy+(s/100)*r*Math.sin(a)); });
        ctx.closePath(); ctx.fill(); ctx.stroke();
    }
</script>
</body>
</html>
